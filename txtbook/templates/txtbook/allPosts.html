{% extends 'txtbook/base.html' %}

{% load static %}
{% block content %}
<!-- <div class="container-fluid"> -->

  <section class="call-to-action text-white text-center">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-xl-9 mx-auto">
          <h2 class="mb-4">Current Posts </h2>
        </div>
        <div class="col-md-1 col-lg-8 col-xl-7 mx-auto">
        </div>
      </div>
    </div>
  </section>
<br> </br>


<style>
    .my-container {
        border: 1px solid lightgray;
        margin-top: 10px;
    }

    .big-col {
        padding-top: 15px;
        padding-left: 15px;
        padding-right: 15px;
        padding-bottom: 15px;
    }

    .header-row {
        padding-top: 15px;
        padding-left: 15px;
        padding-right: 15px;
        padding-bottom: 2px;
    }

    .my-row {
        padding-top: 15px;
        padding-bottom: 5px;
    }

    .sm-row {
        padding-top: 0px;
        padding-bottom: 7px;
    }

    .big-col {
        padding: 10px;
    }
</style>

<div class="col-md-8 text-left mx-auto"> 
    <form class="form" role="form" autocomplete="off" method="post" action="{% url 'txtbook:filtered_posts_search' %}">
    {% csrf_token %}
        <!-- Search Bar -->
        <div class="row my-row text-left">
            <div class="col-12 col-md-8">
              <input type="search" name = "q" class="form-control form-control-lg" aria-label="Search">
            </div>
            <div class="col-3 col-md-2">
              <button type="submit" class="btn btn-block btn-lg btn-primary">Search</button>
            </div>
        </div>

        <!-- Filter -->
        <br><br><u>Filter Options</u>
        <div class="row my-row mx-auto">
            <div class="col-2 my-col">
                <label>Sort by date:     </label>
            </div>
            <div class="form-group small">
                <div class="form-check form-check-inline">
                    <label class="form-check-label">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="oldest"
                                value="oldest"> Oldest
                    </label>
                </div>
                <div class="form-check form-check-inline">
                    <label class="form-check-label">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="newest"
                                value="newest" checked="checked"> Newest
                    </label>
                </div>
            </div>
        </div>
        
        <div class="filter-content">
            <div class="card-body">
                <div class="form-row">
                    <div class="col-2 my-col">Maximum Price:</div>
                    <div class="form-group col-md-2 text-right">
                        <input type="number" class="form-control" id="max_price" name="max_price" placeholder="10,000">
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
<br>

{% if latest_post_list %}
<ul class="text-center">
    {% for post in latest_post_list %}
    <div class="container my-container">
        <div class="row big-row">
            <div class="col-2 big-col float-left">
                {% if post.textbook.user_created == False %}
                <img src="/static/txtbook/thumbnails/{{post.textbook.isbn}}.jpg" style="display: block; width: 150px; height: 175px; margin-left: auto; margin-right: auto">
                {% elif post.image != 'False' %}
                <img src="/media/{{ post.image }}" style="display: block; width: 150px; height: 175px; margin-left: auto; margin-right: auto">
                {% else %}
                <img src="/media/images/no_image_available.png" style="display: block; width: 150px; height: 175px; margin-left: auto; margin-right: auto">

                {% endif %}
            </div>
            <div class="col-10 big-col">
                <div class="row my-row text-left">
                    <div class="col-10 my-col text-left">
                        <h3 class="text-left"><a href="{% url 'txtbook:post' pk=post.id %}">{{ post.textbook.title }}</a>
                        </h3>
                        {% if user.is_active %}
                            <h6 class="text-left">Contact: {{post.email}}</h6>
                        {% else %}
                            <h6 class="text-left">
                                Contact: <a class="nav-link" href="{% url 'social:begin' 'google-oauth2' %}?next={{ request.path }}">Login to contact</a>
                            </h6>
                        {% endif %}
                        <h7 class="text-left">Posted {{ post.date_published }}</h7>
                    </div>
                </div>
                <div class="row my-row">
                    <div class="col-3 my-col text-left">
                        <h5>Price: ${{ post.price }}</h5>
                        <h6 class='text-left'>Condition: {{ post.condition }} / 5<br>
                            Format: {{ post.format }}</h6>
                    </div>
                    <div class="col-4 my-col text-left">
                        {% if post.textbook.author == '' %}
                        <h5 class="text-left">Author(s): N/A</h5>
                        {% else %}
                        <h5 class="text-left">Author(s): {{post.textbook.author}}</h5>
                        {% endif %}
                        {% if post.textbook.isbn == '' %}
                        <h6 class="text-left">ISBN: N/A</h6>
                        {% else %}
                        <h6 class="text-left">ISBN: {{post.textbook.isbn}}</h6>
                        {% endif %}
                    </div>
                    <div class="col-4 my-col text-left">
                        <h5 class="text-left">
                            {% if post.textbook.dept == '' %}
                            Classes: N/A
                            {% else %}
                            Classes: {{post.textbook.dept}} {{post.textbook.classnum}}
                            {% endif %}
                            <br>
                            {% if post.textbook.sect == '' %}
                            Section: N/A
                            {% else %}
                            Section: {{post.textbook.sect}}
                            {% endif %}

                        </h5>
                    </div>

                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</ul>
{% else %}
<p class="text-center">No posts are available.</p>
{% endif %}
{% include 'txtbook/pagination.html' %}

{% endblock %}

<!--https://image.flaticon.com/icons/png/512/130/130304.png-->